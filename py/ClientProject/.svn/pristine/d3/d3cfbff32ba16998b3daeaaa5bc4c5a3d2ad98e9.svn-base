#单例测试导入路径
if __name__ == '__main__':
    import sys, os
    parent_path = os.path.dirname(os.getcwd())
    sys.path.append(parent_path)

from webparser.webparserbase import ParserBase
from serializ.htmlfile import *
from serializ.oracle import *
from bean.urlbean import *
from log.logger import *
import datetime

LOG=logging.getLogger()
LOG.handlers[0].setLevel(logging.INFO)
LOG.handlers[1].setLevel(logging.INFO)

################################
# metadatas = ('题名','来源链接','小区名称','所属区域','小区链接','楼栋名称','地址','建成年份',                            #7
#             '总楼层','当前层','朝向','建筑面积','使用面积','产权性质','装修情况','户型','卧室数量',                      #16
#             '客厅数量','卫生间数量','厨房数量','阳台数量','单价','总价','挂牌时间','房屋图片','信息来源',                #25
#             '联系人','经纪公司','电话号码','纬度','经度','发布时间','住宅类别','建筑类别','配套设施','交通状况',         #35
#             '楼盘物业类型','楼盘绿化率','楼盘物业费','数据来源','城市','行政区','str_order')                            #42

metadatas = ('信息来源','城市','行政区','片区','来源链接','题名','小区名称','小区链接','地址','建成年份','房龄',                     #10
             '楼层','总楼层','当前层','朝向','建筑面积','使用面积','户型','卧室数量','客厅数量','卫生间数量',                        #20
             '厨房数量','阳台数量','总价','单价','本月均价','小区开盘单价','住宅类别','产权性质','装修情况','建筑类别',               #30
             '楼盘物业类型','小区简介','联系人','联系人链接','经纪公司','门店','电话号码','服务商圈','注册时间','经纪公司房源编号',    #40
             '发布时间','小区总户数','小区总建筑面积','容积率','小区总停车位','开发商','交通状况','配套设施','楼盘绿化率','物业公司',  #50
             '楼盘物业费','土地使用年限','入住率','学校','地上层数','花园面积','地下室面积','车库数量','车位数量','厅结构',           #60
             '导航','房屋图片','纬度','经度','str_order','数据来源')                                                                          #65

import requests, re
from bs4 import BeautifulSoup, Tag
#解析58同城网站
class www58com(ParserBase):
    headers = {'Accept': '*/*', 'Accept-Encoding': 'gzip, deflate', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.152 Safari/537.36 LBBROWSER', 'Connection': 'keep-alive'}
    htmlwrite = HtmlFile()
    lou = re.compile(r'(\d+)\D+(\d+)')
    shi = re.compile(r'(\d+)室|卧|卧室')
    ting = re.compile(r'(\d+)厅')
    wei = re.compile(r'(\d+)卫')
    chu = re.compile(r'(\d+)厨')
    yangtai = re.compile(r'(\d+)台|阳台')
    mi = re.compile(r'(\d+.?\d*)㎡')
    jg = re.compile(r'(\d+.?\d*)[.\W]*万[.\W]*(\d+.?\d*)元/㎡')

    def __init__(self):
        super(www58com, self).__init__()

    def default(self, urlbase):
        LOG.info('58默认方法获得城市列表!')
        r = requests.get(urlbase.url, headers=self.headers, timeout=(3.05, 1.5))
        LOG.info('访问耗时:%.4f, url:%s', r.elapsed.microseconds/1000000, r.url)
        if(r.status_code != requests.codes.ok):
            LOG.warning('www58com %s 返回状态:%s', urlbase.url, r.status_code)
            return None
        soup = BeautifulSoup(r.content.decode('utf8'), 'html.parser') #lxml
        citys = soup.find('dl', id='clist').find_all('a')
        citys = set(citys)
        list = []
        i_order = urlbase.order+'0'
        t_145 = ('北京')
        t_80 = ('上海', '成都')
        t_65 = ('深圳')
        t_55 = ('天津')
        t_45 = ('广州','哈尔滨','重庆')
        t_30 = ('杭州','长沙','大连','武汉')
        t_25 = ('厦门','青岛')
        t_20 = ('南京','南京','廊坊','珠海','沈阳','南宁','福州','济南','苏州','石家庄','郑州','长春')
        t_18 = ('淮安','柳州','保定','烟台','无锡','宁波','温州','合肥','东莞','佛山','海口','吉林','昆明','拉萨','太原','呼和浩特','西安','乌鲁木齐','兰州','西宁','三亚')
        t_12 = ('鞍山','安庆','安阳','巴音郭楞','蚌埠',
               '包头','宝鸡','滨州','博罗','沧州','常德',
               '巢湖','承德','池州','赤峰','达州','大庆',
               '大同','丹东','德阳','德州','东海','东台',
               '鄂尔多斯','阜阳','甘南','甘孜','赣州','桂林',
               '贵阳','海安','海门','邯郸','和田','衡水','淮北',
               '淮南','黄石','惠东','惠州','霍邱','吉安','济宁','嘉峪关',
               '佳木斯','建湖','江门','金华','锦州','晋江','晋中','荆州',
               '九江','开封','乐山','连云港','聊城','临沂','六安','陇南',
               '娄底','洛阳','眉山','绵阳','牡丹江','南安','南昌','南充',
               '南平','南通','南阳','宁德','平顶山','莆田','齐齐哈尔','启东',
               '秦皇岛','曲靖','泉州','日照','如东','如皋','汕头','商丘',
               '上饶','石河子','石狮','寿光','松原','宿迁','遂宁','台州','泰安',
               '泰兴','泰州','唐山','威海','潍坊','芜湖','襄阳','湘潭','湘西','新乡',
               '新沂','信阳','邢台','徐州','许昌','盐城','延边','扬州','宜宾','宜昌',
               '宜春','义乌','银川','营口','岳阳','枣庄','湛江','漳州','张家口','肇庆',
               '中山','株洲','驻马店','淄博','自贡','遵义','邳州','衢州','泸州','漯河')
        t_2 = ('阿坝')
        for i in citys:
            #if i.text not in ('北京', '上海', '广州', '深圳'): continue
            if i.text in t_145:
                i_count = 1
                while i_count <=145:  #35
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            elif i.text in t_80:
                i_count = 1
                while i_count <=80:  #35
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            elif i.text in t_65:
                i_count = 1
                while i_count <=65:  #35
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            elif i.text in t_55:
                i_count = 1
                while i_count <=55:  #35
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            elif i.text in t_45:
                i_count = 1
                while i_count <=45:  #35
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            elif i.text in t_30:
                i_count = 1
                while i_count <=30:  #35
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            elif i.text in t_25:
                i_count = 1
                while i_count <=25:
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            elif i.text in t_20:
                i_count = 1
                while i_count <=20:
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            elif i.text in t_18:
                i_count = 1
                while i_count <=18:
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            elif i.text in t_12:
                i_count = 1
                while i_count <=12:
                    list.append(UrlBean(i['href']+'pn'+str(i_count)+'/', self.message('getpages'), param=i_count, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+'pn'+str(i_count)+'/')
                    i_count += 1
            else:
                if (i.text=='钓鱼岛'):
                    continue
                # 更改为采集7页
                list.append(UrlBean(i['href'], self.message('getpages'), param=1, headers=i.text, order=i_order))
                LOG.info('获得城市%s页面信息%s', i.text, i['href'])
                for i_oth in range(2, 8):
                    list.append(UrlBean(i['href']+('pn%d/' % i_oth), self.message('getpages'), param=i_oth, headers=i.text, order=i_order))
                    LOG.info('获得城市%s页面信息%s', i.text, i['href']+('pn%d/' % i_oth))
        return list

    #解析城市二手房列表页
    def getpages(self, urlbase):
        LOG.info('58getpages获得城市%s二手房列表信息', urlbase.url)
        r = requests.get(urlbase.url, headers=self.headers, timeout=(3.05, 1.5))
        LOG.info('访问耗时:%.4f, url:%s', r.elapsed.microseconds/1000000, r.url)
        if(r.status_code != requests.codes.ok):
            LOG.warning('www58com %s 返回状态:%s', urlbase.url, r.status_code)
            return None
        soup = BeautifulSoup(r.content.decode('utf8'), 'html.parser') #lxml
        items = soup.find('div', id='infolist').find_all('a', attrs={'infoid': True})
        list = []
        itemIndex = 1
        i_order = urlbase.order+'1'
        for item in items:
            if '.shtml' in item['href']:
                sUrl = item['href'].split('?')[0]
                list.append(UrlBean(sUrl, self.message('getitem'), key=sUrl, param=urlbase.headers, order=i_order))
                LOG.debug('%s第%d页%d项' % (urlbase.headers, urlbase.param, itemIndex))
                itemIndex += 1
        #存在分页信息
        # if urlbase.param and urlbase.param<=self.fetchpage:
        #     #获得下一页地址
        #     nextpage = soup.find('div', id='house-area')
        #     if nextpage:
        #         nextpageurl = nextpage.find('a', class_='next')
        #         if nextpageurl:
        #             host = '/'.join(r.url.split('/')[:3])
        #             list.append(UrlBean(host+nextpageurl['href'], self.message('getpages'), param=urlbase.param+1, headers=urlbase.headers))
        #             LOG.debug('%s第%d页' % (urlbase.headers, urlbase.param))
        return list

    #解析详细页面信息
    def getitem(self, urlbase):
        LOG.info('58getinfo获得城市%s挂牌详细信息', urlbase.url)
        t1 = time.time()
        r = requests.get(urlbase.url, headers=self.headers, timeout=(3.05, 1.5))
        t2 = time.time()
        LOG.info('处理58请求getitem耗时:%f' % (t2-t1))
        LOG.info('访问耗时:%.4f, url:%s', r.elapsed.microseconds/1000000, r.url)
        #存储页面信息
        t1 = time.time()
        self.htmlwrite.save('%s\\%s\\%s' %(self.__class__.__name__, '二手房', urlbase.param), r.url, r.text)
        t2 = time.time()
        if(r.status_code != requests.codes.ok):
            LOG.warning('www58com %s 返回状态:%s', r.request.url, r.status_code)
            return
        t1 = time.time()
        reText = r.text
        soup = BeautifulSoup(r.content.decode('utf8'), 'html.parser') #lxml
        mainPart = soup.find('div', class_='mainTitle')
        lr = {}
        try:
            #获得标题
            #print(metadatas[0], mainPart.div.text)
            lr[metadatas[5]] = mainPart.div.text
        except Exception as e:
            lr[metadatas[5]] = ''

        try:
            #获得来源链接
            #print(metadatas[1], r.url)
            lr[metadatas[4]] = r.url
        except Exception as e:
            lr[metadatas[4]] = ''

        infoPart = soup.find('div', class_='sumary')
        try:
            weizhi = soup.find('div', class_='su_tit', text='位置：').parent
            pos = re.sub(r'[\W\r\n]+', '-', weizhi.getText(strip=True)).split('-')
            #获得小区名称
            #print(metadatas[2], pos[3])
            lr[metadatas[6]] = pos[3] if len(pos)>=4 else pos[-1]
        except Exception as e:
            lr[metadatas[6]] = ''

        try:
            #获得所属区域
            #print(metadatas[3], pos[2])
            lr[metadatas[3]] = pos[2] if len(pos)>=4 else ''
        except Exception as e:
            lr[metadatas[3]] = ''

        try:
            #获得小区链接
            #print(metadatas[4], weizhi.find_all('a')[2]['href'])
            lr[metadatas[7]] = weizhi.find_all('a')[2]['href']
        except Exception as e:
            lr[metadatas[7]] = ''


        xq = soup.find('div', class_='xiaoqu_txt')
        try:
            #获得地址
            #print(metadatas[6], xq.find_all('p')[1].text.split("：")[1])
            lr[metadatas[8]] = xq.find_all('p')[1].text.split("：")[1]
        except Exception as e:
            lr[metadatas[8]] = ''

        fydes = soup.find('section', id='fyms')
        try:
            #建成年份
            li = fydes.find(lambda x:re.compile('建造年代：').match(x.text) is not None)
            result = ''
            for li in li.next_siblings:
                if isinstance(li, Tag) and li.name == 'li':
                    result = li.text
                    break
            #print(metadatas[7], result)
            lr[metadatas[9]] = result
        except Exception as e:
            lr[metadatas[9]] = ''

        try:
            #总楼层
            li = fydes.find(lambda x:re.compile('房屋楼层：').match(x.text) is not None)
            result = ''
            for li in li.next_siblings:
                if isinstance(li, Tag) and li.name == 'li':
                    result = li.text
                    break
            lr[metadatas[11]] = result
            gr = re.search(www58com.lou, result).groups()
            #print(metadatas[8], gr[1])
            lr[metadatas[12]] = gr[1]
        except Exception as e:
            lr[metadatas[11]] = ''
            lr[metadatas[12]] = ''

        try:
            #当前层
            #print(metadatas[9], gr[0])
            lr[metadatas[13]] = gr[0]
        except Exception as e:
            lr[metadatas[13]] = ''

        try:
            #朝向
            li = fydes.find(lambda x:re.compile('朝向：').match(x.text) is not None)
            result = ''
            for li in li.next_siblings:
                if isinstance(li, Tag) and li.name == 'li':
                    result = li.text
                    break
            #print(metadatas[10], result)
            lr[metadatas[14]] = result
        except Exception as e:
            lr[metadatas[14]] = ''

        try:
            #建筑面积
            hx = soup.find('div', class_='su_tit', text='户型：').parent
            #print(metadatas[11], re.search(www58com.mi, hx.text).group(1))
            lr[metadatas[15]] = re.search(www58com.mi, hx.text).group(1)
        except Exception as e:
            lr[metadatas[15]] = ''

        try:
            #使用面积
            symj = re.findall('（套内(.*?)㎡）',hx.text,re.S)[0]
            lr[metadatas[16]] = symj
        except Exception as e:
            lr[metadatas[16]] = ''

        try:
            #产权性质
            li = fydes.find(lambda x:re.compile('房屋类型：').match(x.text) is not None)
            result = ''
            for li in li.next_siblings:
                if isinstance(li, Tag) and li.name == 'li':
                    result = li.text
                    break
            #print(metadatas[13], result)
            lr[metadatas[28]] = result
        except Exception as e:
            lr[metadatas[28]] = ''

        try:
            #装修情况
            li = fydes.find(lambda x:re.compile('装修程度：').match(x.text) is not None)
            result = ''
            for li in li.next_siblings:
                if isinstance(li, Tag) and li.name == 'li':
                    result = li.text
                    break
            #print(metadatas[14], result)
            lr[metadatas[29]] = result.replace('找装修','').strip()
        except Exception as e:
            lr[metadatas[29]] = ''

        try:
            #户型
            #print(metadatas[15], ''.join(re.sub(r'[\W|\r|\n]+', '-', hx.getText(strip=True)).split('-')[1:4]))
            lr[metadatas[17]] = ''.join(re.sub(r'[\W\r\n]+', '-', hx.getText(strip=True)).split('-')[1:4])
        except Exception as e:
            lr[metadatas[17]] = ''

        try:
            #卧室数量
            #print(metadatas[16], re.search(www58com.shi, hx.text).group(1))
            lr[metadatas[18]] = re.search(www58com.shi, hx.text).group(1)
        except Exception as e:
            lr[metadatas[18]] = ''

        try:
            #客厅数量
            #print(metadatas[17], re.search(www58com.ting, hx.text).group(1))
            lr[metadatas[19]] = re.search(www58com.ting, hx.text).group(1)
        except Exception as e:
            lr[metadatas[19]] = ''

        try:
            #卫生间数量
            #print(metadatas[18], re.search(www58com.wei, hx.text).group(1))
            lr[metadatas[20]] = re.search(www58com.wei, hx.text).group(1)
        except Exception as e:
            lr[metadatas[20]] = ''

        try:
            #厨房数量
            #print(metadatas[19], re.search(www58com.chu, hx.text).group(1))
            lr[metadatas[21]] = re.search(www58com.chu, hx.text).group(1)
        except Exception as e:
            lr[metadatas[21]] = ''

        try:
            #阳台数量
            #print(metadatas[20], re.search(www58com.yangtai, hx.text).group(1))
            lr[metadatas[22]] = re.search(www58com.yangtai, hx.text).group(1)
        except Exception as e:
            lr[metadatas[22]] = ''

        try:
            #单价
            sj = infoPart.find(lambda x:re.compile('售价：').match(x.text) is not None)
            jg = re.search(www58com.jg, sj.parent.text)
            #print(metadatas[21], jg.group(2))
            lr[metadatas[24]] = jg.group(2)
        except Exception as e:
            lr[metadatas[24]] = ''

        try:
            #总价
            #print(metadatas[22], jg.group(1))
            lr[metadatas[23]] = jg.group(1)
        except Exception as e:
            lr[metadatas[23]] = ''

        # try:
        #     #挂牌时间,动态JS
        #     #print(metadatas[23], mainPart.find('li', class_='time').script)
        #     #for child in mainPart.find('li', class_='time').children:
        #         #print(child)
        #     lr[metadatas[23]] = mainPart.find('li', class_='time').text
        # except Exception as e:
        #     lr[metadatas[23]] = ''

        try:
            #房屋图片
            #print(metadatas[24], soup.find('img', id='img1')['src'])
            lr[metadatas[62]] = soup.find('img', id='img1')['src']
        except Exception as e:
            lr[metadatas[62]] = ''

        #信息来源
        # try:
        #     lr[metadatas[25]] = soup.find('div', class_='nav').a.text
        # except Exception as e:
        #     lr[metadatas[25]] = ''

        try:
            #联系人
            #print(metadatas[26], fydes.find('p', class_='broker_r_p').text)
            lr[metadatas[33]] = fydes.find('p', class_='broker_r_p').text.split('该经纪人')[0].strip()
        except Exception as e:
            lr[metadatas[33]] = ''

        try:
            #联系人链接
            #print(metadatas[26], fydes.find('p', class_='broker_r_p').text)
            lr[metadatas[34]] = fydes.find('p', class_='broker_r_p').find('a')['href'].strip()
        except Exception as e:
            lr[metadatas[34]] = ''

        # try:
        #     #经纪公司
        #     # jjr = soup.find('div', class_='jjreninfo')
        #     # if (jjr):
        #     #     lr[metadatas[35]] = jjr.find('li', class_='jjreninfo_des_com').text.split('官方认证')[0].strip()
        #     # else:
        #     lr[metadatas[35]] = re.findall('"I":10276,"V":"(.*?)"',reText,re.S)[0]
        # except Exception as e:
        #     lr[metadatas[35]] = ''

        if lr[metadatas[34]] != '' and 'my.58' not in lr[metadatas[34]]:
            try:
                rjjr = requests.get(lr[metadatas[34]], headers=self.headers, timeout=(3.05, 2.5))
                reTextjjr = rjjr.text
            except:
                reTextjjr = ''
            try:
                rejjgs = re.findall('<dt>所属公司：</dt>(.*?)</dd>',reTextjjr,re.S)[0]
                dr = re.compile(r'<[^>]+>',re.S)
                lr[metadatas[35]] =  re.sub(dr,'',rejjgs).strip()
            except:
                lr[metadatas[35]] = ''
            try:
                rejjmd = re.findall('<dt>所属门店：</dt>(.*?)</dd>',reTextjjr,re.S)[0]
                dr = re.compile(r'<[^>]+>',re.S)
                lr[metadatas[36]] =  re.sub(dr,'',rejjmd).strip()
            except:
                lr[metadatas[36]] = ''
            try:
                lr[metadatas[38]] = re.findall('<li><label>服务区域：</label><span>(.*?)</span>',reTextjjr,re.S)[0]
            except:
                lr[metadatas[38]] = ''
        else:
            try:
            #经纪公司
                lr[metadatas[35]] = re.findall('"I":10276,"V":"(.*?)"',reText,re.S)[0]
            except Exception as e:
                lr[metadatas[35]] = ''
            lr[metadatas[36]] = lr[metadatas[38]] =''


        try:
            #电话号码
            lr[metadatas[37]] = re.sub('\s','',soup.find('span', id='t_phone').text)
        except Exception as e:
            lr[metadatas[37]] = ''

        lr[metadatas[41]] = datetime.datetime.now().strftime('%Y-%m-%d')

        try:
            des_table = fydes.find('ul', class_='des_table')
            #住宅类别
            li = des_table.find(lambda x:re.compile('住宅类别：').match(x.text) is not None)
            result = ''
            for li in li.next_siblings:
                if isinstance(li, Tag) and li.name == 'li':
                    result = li.text
                    break
            #print(metadatas[32], result)
            lr[metadatas[27]] = result
        except Exception as e:
            lr[metadatas[27]] = ''

        try:
            #建筑类别
            li = des_table.find(lambda x:re.compile('建筑结构：').match(x.text) is not None)
            result = ''
            for li in li.next_siblings:
                if isinstance(li, Tag) and li.name == 'li':
                    result = li.text
                    break
            lr[metadatas[30]] = result
        except Exception as e:
            lr[metadatas[30]] = ''

        try:
            #配套设施,动态JS
            spans = fydes.find('div', class_='peizhi').find_all('span')
            #print(metadatas[34], ''.join(span.text for span in spans))
            ptstr = ''.join(span.text for span in spans)
            lr[metadatas[48]] = re.search("var tmp = '(.*?)';",ptstr,re.S).group(1)
        except Exception as e:
            lr[metadatas[48]] = ''

        try:
            #交通状况
            ps = fydes.find('article', class_='description_con').find_all('p')
            #print(metadatas[35], ''.join(p.text for p in ps))
            strjt = ''.join(p.text for p in ps)
            lr[metadatas[47]] = strjt[0:2000]
        except Exception as e:
            lr[metadatas[47]] = ''

        try:
            #土地使用年限
            li = des_table.find(lambda x:re.compile('产权：').match(x.text) is not None)
            result = ''
            for li in li.next_siblings:
                if isinstance(li, Tag) and li.name == 'li':
                    result = li.text
                    break
            lr[metadatas[52]] = result
        except Exception as e:
            lr[metadatas[52]] = ''

        lr[metadatas[10]] = ''
        lr[metadatas[25]] = ''
        lr[metadatas[26]] = ''
        lr[metadatas[31]] = ''
        lr[metadatas[32]] = ''
        lr[metadatas[39]] = ''
        lr[metadatas[40]] = ''
        lr[metadatas[42]] = ''
        lr[metadatas[43]] = ''
        lr[metadatas[44]] = ''
        lr[metadatas[45]] = ''
        lr[metadatas[46]] = ''
        lr[metadatas[49]] = ''
        lr[metadatas[50]] = ''
        lr[metadatas[51]] = ''
        lr[metadatas[53]] = ''
        lr[metadatas[54]] = ''
        lr[metadatas[55]] = ''
        lr[metadatas[56]] = ''
        lr[metadatas[57]] = ''
        lr[metadatas[58]] = ''
        lr[metadatas[59]] = ''
        lr[metadatas[60]] = ''
        lr[metadatas[63]] = ''
        lr[metadatas[64]] = ''


        lr[metadatas[0]] = 's0000058'
        lr[metadatas[66]] = '58'

        try:
            #导航
            lr[metadatas[61]] = ">".join([dd.text.strip().replace('二手房','') for dd in soup.find('div', class_='nav').find_all('a')])
        except Exception as e:
            lr[metadatas[61]] = ''

        try:
            #城市
            #print(metadatas[40], soup.find('div', class_='nav').a.text.split('58')[0])
            lr[metadatas[1]] = soup.find('div', class_='nav').a.text.split('58')[0]
        except Exception as e:
            lr[metadatas[1]] = ''

        try:
            #行政区
            #print(metadatas[41], pos[1])
            lr[metadatas[2]] = pos[1]
        except Exception as e:
            lr[metadatas[2]] = ''
        lr[metadatas[65]] = urlbase.order if urlbase.order is not None else ''
        t2 = time.time()
        LOG.info('解析页面耗时:%f' % (t2-t1))
        # print(metadatas[1], lr[metadatas[1]], '|',
        #       metadatas[2], lr[metadatas[2]], '|',
        #       metadatas[3], lr[metadatas[3]], '|',
        #       metadatas[6], lr[metadatas[6]], '|',
        #       metadatas[15], lr[metadatas[15]], '|',
        #       metadatas[23], lr[metadatas[23]], '|',
        #       metadatas[24], lr[metadatas[24]])
        #将分析的信息写入数据库
        #www58com.mysql.save(lr, metadatas)
        MySqlEx.save(lr, metadatas)

    #def getinfo(self, urlbase):
        #LOG.info('58getinfo获得%s挂牌详细信息' , urlbase.url)


if __name__ == '__main__':
    w58 = www58com()
    #print(len(w58.default(UrlBase('http://www.58.com/ershoufang/changecity/', 'www58com',order='12345632156'))))
    #print(len(w58.getpages(UrlBean('http://hq.58.com/ershoufang/', 'www58com#getitem', param=10, headers='北京'))))
    #print(w58.getpages(UrlBean('http://bj.58.com/ershoufang/pn2', 'www58com#getitem', param=9, headers='北京')))
    w58.getitem(UrlBean('http://su.58.com/ershoufang/25379091344331x.shtml', 'www58com#getpages', param='北京',order='12345632156'))
    w58.getitem(UrlBean('http://xf.58.com/ershoufang/25620931062967x.shtml', 'www58com#getpages', param='北京',order='12345632156'))
    ls = ('http://sz.58.com/ershoufang/25620751715642x.shtml',
'http://xf.58.com/ershoufang/25620931062967x.shtml',
'http://bj.58.com/ershoufang/25621061677130x.shtml',
'http://yiwu.58.com/ershoufang/25617753404866x.shtml',
'http://shz.58.com/ershoufang/25617241124526x.shtml',
'http://yichun.58.com/ershoufang/25620926817341x.shtml',
'http://tj.58.com/ershoufang/25619698536523x.shtml',
'http://xy.58.com/ershoufang/25620975800388x.shtml',
'http://cq.58.com/ershoufang/25616909690410x.shtml',
'http://sh.58.com/ershoufang/25621068598335x.shtml',
'http://dg.58.com/ershoufang/25617146378795x.shtml',
'http://yy.58.com/ershoufang/25615652359367x.shtml',
'http://bn.58.com/ershoufang/25620285412174x.shtml',
'http://mdj.58.com/ershoufang/25620933508672x.shtml',
'http://zs.58.com/ershoufang/25620372301635x.shtml',
'http://dq.58.com/ershoufang/25621049002958x.shtml',
'http://bd.58.com/ershoufang/25620799297339x.shtml',
'http://tongliao.58.com/ershoufang/25621047681350x.shtml',
'http://fs.58.com/ershoufang/25614070931399x.shtml',
'http://jz.58.com/ershoufang/25620820123212x.shtml',
'http://cd.58.com/ershoufang/25620677269833x.shtml',
'http://haibei.58.com/ershoufang/25618610831424x.shtml',
'http://wf.58.com/ershoufang/25619679068355x.shtml',
'http://dl.58.com/ershoufang/25619801585997x.shtml',
'http://dx.58.com/ershoufang/25620918435776x.shtml',
'http://lyg.58.com/ershoufang/25620502473670x.shtml',
'http://nd.58.com/ershoufang/25621021794474x.shtml',
'http://zjk.58.com/ershoufang/25620825789620x.shtml',
'http://dz.58.com/ershoufang/25619731500469x.shtml',
'http://yanan.58.com/ershoufang/25620972666293x.shtml',
'http://wuhu.58.com/ershoufang/25614927350092x.shtml',
'http://sp.58.com/ershoufang/25620917332401x.shtml',
'http://yancheng.58.com/ershoufang/25620731277115x.shtml',
'http://songyuan.58.com/ershoufang/25620918464205x.shtml',
'http://cc.58.com/ershoufang/25619956517567x.shtml',
'http://xc.58.com/ershoufang/25620932925641x.shtml',
'http://xx.58.com/ershoufang/25620688658496x.shtml',
'http://chizhou.58.com/ershoufang/25620827162289x.shtml',
'http://cangzhou.58.com/ershoufang/25620924848056x.shtml',
'http://zs.58.com/ershoufang/25388933380526x.shtml',
'http://sjz.58.com/ershoufang/25616765407536x.shtml',
'http://lf.58.com/ershoufang/25620861258543x.shtml',
'http://sr.58.com/ershoufang/25620714576440x.shtml',
'http://gz.58.com/ershoufang/25617049222215x.shtml',
'http://dingzhou.58.com/ershoufang/25620990835003x.shtml',
'http://hn.58.com/ershoufang/25620765698609x.shtml',
'http://jixi.58.com/ershoufang/25620970991402x.shtml',
'http://linyi.58.com/ershoufang/25613720516420x.shtml',
'http://hz.58.com/ershoufang/25614474359215x.shtml',
'http://jingzhou.58.com/ershoufang/25620850746546x.shtml',
'http://lyg.58.com/ershoufang/24186938403768x.shtml',
'http://wh.58.com/ershoufang/25616747722296x.shtml',
'http://fuzhou.58.com/ershoufang/25620913200056x.shtml',
'http://hshi.58.com/ershoufang/25615420338763x.shtml',
'http://zh.58.com/ershoufang/25617020023376x.shtml',
'http://qth.58.com/ershoufang/25620986952900x.shtml',
'http://bz.58.com/ershoufang/25620881636942x.shtml',
'http://np.58.com/ershoufang/25621071777604x.shtml',
'http://st.58.com/ershoufang/25617248452413x.shtml',
'http://jingjiang.58.com/ershoufang/25621055212608x.shtml',
'http://erds.58.com/ershoufang/25614499844921x.shtml',
'http://hegang.58.com/ershoufang/25621179802544x.shtml',
'http://su.58.com/ershoufang/25614625313861x.shtml',
'http://ny.58.com/ershoufang/25614442570175x.shtml',
'http://dafeng.58.com/ershoufang/25620975252410x.shtml',
'http://yt.58.com/ershoufang/25620709526079x.shtml',
'http://sys.58.com/ershoufang/25621160946367x.shtml',
'http://tz.58.com/ershoufang/25620694324531x.shtml',
'http://ankang.58.com/ershoufang/25620986076204x.shtml',
'http://hf.58.com/ershoufang/25619586707369x.shtml',
'http://jiyuan.58.com/ershoufang/25620879057472x.shtml',
'http://yangchun.58.com/ershoufang/25615805070137x.shtml',
'http://xinzhou.58.com/ershoufang/25620106676550x.shtml',
'http://zmd.58.com/ershoufang/25620905952577x.shtml',
'http://xl.58.com/ershoufang/25621000270009x.shtml',
'http://jms.58.com/ershoufang/25620893735341x.shtml',
'http://jining.58.com/ershoufang/25615236875851x.shtml',
'http://anqing.58.com/ershoufang/25620960880814x.shtml',
'http://qd.58.com/ershoufang/25616737777581x.shtml',
'http://cs.58.com/ershoufang/25616772965682x.shtml',
'http://zhangqiu.58.com/ershoufang/25621036380616x.shtml',
'http://zz.58.com/ershoufang/25616396989770x.shtml',
'http://ld.58.com/ershoufang/25620931040718x.shtml',
'http://zhanjiang.58.com/ershoufang/25620933923650x.shtml',
'http://tianshui.58.com/ershoufang/25614306430517x.shtml',
'http://zb.58.com/ershoufang/25620778460215x.shtml',
'http://xm.58.com/ershoufang/25620035258701x.shtml',
'http://nj.58.com/ershoufang/25615955991627x.shtml',
'http://benxi.58.com/ershoufang/25620856067395x.shtml',
'http://huaibei.58.com/ershoufang/25620908917435x.shtml',
'http://baishan.58.com/ershoufang/25621120758848x.shtml',
'http://sl.58.com/ershoufang/25619742114880x.shtml',
'http://xj.58.com/ershoufang/25615703142350x.shtml',
'http://chuzhou.58.com/ershoufang/25620665059265x.shtml',
'http://fz.58.com/ershoufang/25616765656528x.shtml',
'http://dt.58.com/ershoufang/25620949159370x.shtml',
'http://tl.58.com/ershoufang/25620799598158x.shtml',
'http://qhd.58.com/ershoufang/25619813445041x.shtml',
'http://nb.58.com/ershoufang/25619391190218x.shtml',
'http://nn.58.com/ershoufang/25613834777289x.shtml',
'http://gy.58.com/ershoufang/25615905971243x.shtml',
'http://tongxiang.58.com/ershoufang/25620716072890x.shtml',
'http://ly.58.com/ershoufang/25620833676865x.shtml',
'http://yq.58.com/ershoufang/25621061238349x.shtml',
'http://xianyang.58.com/ershoufang/25620904597552x.shtml',
'http://ch.58.com/ershoufang/25620976447533x.shtml',
'http://ningguo.58.com/ershoufang/25621202988485x.shtml',
'http://guyuan.58.com/ershoufang/25621167162832x.shtml',
'http://jq.58.com/ershoufang/25620945548473x.shtml',
'http://qingyang.58.com/ershoufang/25621031666888x.shtml',
'http://km.58.com/ershoufang/25615365833916x.shtml',
'http://zw.58.com/ershoufang/25621114875728x.shtml',
'http://wuwei.58.com/ershoufang/25620888116934x.shtml',
'http://shuyang.58.com/ershoufang/25620703139248x.shtml',
'http://yili.58.com/ershoufang/25614181495859x.shtml',
'http://chaozhou.58.com/ershoufang/25621187533866x.shtml',
'http://zc.58.com/ershoufang/25620915940552x.shtml',
'http://ez.58.com/ershoufang/25620897820225x.shtml',
'http://ja.58.com/ershoufang/25621035432501x.shtml',
'http://luohe.58.com/ershoufang/25620899590726x.shtml',
'http://jm.58.com/ershoufang/25611681339984x.shtml',
'http://changde.58.com/ershoufang/25616831634863x.shtml',
'http://tongcheng.58.com/ershoufang/25602005441330x.shtml',
'http://jincheng.58.com/ershoufang/25620990699835x.shtml',
'http://quzhou.58.com/ershoufang/25620908494788x.shtml',
'http://hs.58.com/ershoufang/25620887430958x.shtml',
'http://zaozhuang.58.com/ershoufang/25620519238581x.shtml',
'http://th.58.com/ershoufang/25620978757805x.shtml',
'http://haimen.58.com/ershoufang/25621008186059x.shtml',
'http://cy.58.com/ershoufang/25620811845428x.shtml',
'http://pt.58.com/ershoufang/25620882194754x.shtml',
'http://betl.58.com/ershoufang/25620948141892x.shtml',
'http://liaoyang.58.com/ershoufang/25621007254844x.shtml',
'http://jj.58.com/ershoufang/25615497067313x.shtml',
'http://zunyi.58.com/ershoufang/25611948024139x.shtml',
'http://fx.58.com/ershoufang/25621059543986x.shtml',
'http://huizhou.58.com/ershoufang/25617102729152x.shtml',
'http://zj.58.com/ershoufang/25620961880366x.shtml',
'http://bycem.58.com/ershoufang/25620873947054x.shtml',
'http://rugao.58.com/ershoufang/25620142512572x.shtml',
'http://zhangye.58.com/ershoufang/25621139479358x.shtml',
'http://ts.58.com/ershoufang/25616064948909x.shtml',
'http://chengde.58.com/ershoufang/25620821399496x.shtml',
'http://xiaogan.58.com/ershoufang/25614006856879x.shtml',
'http://zy.58.com/ershoufang/25620977794253x.shtml',
'http://dy.58.com/ershoufang/25620896300086x.shtml',
'http://shuozhou.58.com/ershoufang/25620983005098x.shtml',
'http://zhuzhou.58.com/ershoufang/25614839647048x.shtml',
'http://linfen.58.com/ershoufang/25620889810101x.shtml',
'http://ha.58.com/ershoufang/25620902068299x.shtml',
'http://wfd.58.com/ershoufang/25621112578626x.shtml',
'http://fy.58.com/ershoufang/25620692979405x.shtml',
'http://yk.58.com/ershoufang/25612337912249x.shtml',
'http://ga.58.com/ershoufang/25620948213420x.shtml',
'http://xam.58.com/ershoufang/25621077913296x.shtml',
'http://shiyan.58.com/ershoufang/25620926016458x.shtml',
'http://ks.58.com/ershoufang/25616854795850x.shtml',
'http://heyuan.58.com/ershoufang/25620926504116x.shtml',
'http://tongling.58.com/ershoufang/25620944885677x.shtml',
'http://sq.58.com/ershoufang/25615596262967x.shtml',
'http://dali.58.com/ershoufang/25613065578540x.shtml',
'http://xianning.58.com/ershoufang/25621082580905x.shtml',
'http://dandong.58.com/ershoufang/25620760333772x.shtml',
'http://yanbian.58.com/ershoufang/25620704057922x.shtml',
'http://wx.58.com/ershoufang/25617042415019x.shtml',
'http://hlbe.58.com/ershoufang/25621074381762x.shtml',
'http://lw.58.com/ershoufang/25620519847466x.shtml',
'http://sy.58.com/ershoufang/25619843466565x.shtml',
'http://wlcb.58.com/ershoufang/25621083751116x.shtml',
'http://la.58.com/ershoufang/25620816848446x.shtml',
'http://pe.58.com/ershoufang/25615468210113x.shtml',
'http://pizhou.58.com/ershoufang/25621058865838x.shtml',
'http://hami.58.com/ershoufang/25621154868294x.shtml',
'http://hrb.58.com/ershoufang/25616002522687x.shtml',
'http://jl.58.com/ershoufang/25615808782908x.shtml',
'http://sx.58.com/ershoufang/25620744015174x.shtml',
'http://xinghuashi.58.com/ershoufang/25619967937457x.shtml',
'http://panzhihua.58.com/ershoufang/25620805939637x.shtml',
'http://sg.58.com/ershoufang/25615728796732x.shtml',
'http://qz.58.com/ershoufang/25611184995887x.shtml',
'http://rizhao.58.com/ershoufang/25619892334918x.shtml',
'http://taixing.58.com/ershoufang/25620955779267x.shtml',
'http://haidong.58.com/ershoufang/25621196543797x.shtml',
'http://cz.58.com/ershoufang/25613508923596x.shtml',
'http://weihai.58.com/ershoufang/25619612769348x.shtml',
'http://qqhr.58.com/ershoufang/25620812000695x.shtml',
'http://qz.58.com/ershoufang/23255322805280x.shtml',
'http://yingtan.58.com/ershoufang/25620832566736x.shtml',
'http://qingyuan.58.com/ershoufang/25615209439809x.shtml',
'http://yf.58.com/ershoufang/25616771549486x.shtml',
'http://yj.58.com/ershoufang/25303403042354x.shtml',
'http://px.58.com/ershoufang/25616753837639x.shtml',
'http://szs.58.com/ershoufang/25615872052036x.shtml',
'http://mm.58.com/ershoufang/25615588828847x.shtml',
'http://ty.58.com/ershoufang/25611660267945x.shtml',
'http://suining.58.com/ershoufang/25613072657730x.shtml',
'http://hu.58.com/ershoufang/25614815318211x.shtml',
'http://bazhong.58.com/ershoufang/25620965814587x.shtml',
'http://pds.58.com/ershoufang/25620851005244x.shtml',
'http://yuzhou.58.com/ershoufang/25621103585077x.shtml',
'http://zg.58.com/ershoufang/25620714505527x.shtml',
'http://xa.58.com/ershoufang/25613425410218x.shtml',
'http://wz.58.com/ershoufang/25618454363967x.shtml',
'http://changzhi.58.com/ershoufang/25620844046262x.shtml',
'http://qz.58.com/ershoufang/22176533386506x.shtml',
'http://heihe.58.com/ershoufang/25621030463808x.shtml',
'http://zhangzhou.58.com/ershoufang/25615481564624x.shtml',
'http://mianyang.58.com/ershoufang/25613385065400x.shtml',
'http://chifeng.58.com/ershoufang/25615783797709x.shtml',
'http://liaoyuan.58.com/ershoufang/25621035024592x.shtml',
'http://cixi.58.com/ershoufang/25620902501189x.shtml',
'http://xuancheng.58.com/ershoufang/25621086324271x.shtml',
'http://suzhou.58.com/ershoufang/25621061505994x.shtml',
'http://heze.58.com/ershoufang/25620822832331x.shtml',
'http://by.58.com/ershoufang/25621080266432x.shtml',
'http://lc.58.com/ershoufang/25620865531343x.shtml',
'http://shishi.58.com/ershoufang/25621106762184x.shtml',
'http://hg.58.com/ershoufang/25613763839812x.shtml',
'http://ms.58.com/ershoufang/25614201579723x.shtml',
'http://xz.58.com/ershoufang/25613572380494x.shtml',
'http://jn.58.com/ershoufang/25602155789880x.shtml',
'http://yiyang.58.com/ershoufang/25620841265472x.shtml',
'http://ganzhou.58.com/ershoufang/25620018317358x.shtml',
'http://qj.58.com/ershoufang/25620851627966x.shtml',
'http://sm.58.com/ershoufang/25620825004477x.shtml',
'http://pld.58.com/ershoufang/25620972059832x.shtml',
'http://shouguang.58.com/ershoufang/25620702321993x.shtml',
'http://lz.58.com/ershoufang/25603026762566x.shtml',
'http://haikou.58.com/ershoufang/25612639300542x.shtml',
'http://yl.58.com/ershoufang/25620927859662x.shtml',
'http://hd.58.com/ershoufang/25613151053103x.shtml',
'http://pl.58.com/ershoufang/25621011860939x.shtml',
'http://jy.58.com/ershoufang/25615909682123x.shtml',
'http://ya.58.com/ershoufang/25621046115654x.shtml',
'http://ay.58.com/ershoufang/25620985615159x.shtml',
'http://hezhou.58.com/ershoufang/25620981588405x.shtml',
'http://dazhou.58.com/ershoufang/25621080309558x.shtml',
'http://ws.58.com/ershoufang/25614090017328x.shtml',
'http://dongtai.58.com/ershoufang/25620619860526x.shtml',
'http://anshun.58.com/ershoufang/25620998862511x.shtml',
'http://yc.58.com/ershoufang/25620808175810x.shtml',
'http://yongzhou.58.com/ershoufang/25620708164940x.shtml',
'http://rudong.58.com/ershoufang/25267869243849x.shtml',
'http://wuhai.58.com/ershoufang/25620901362495x.shtml',
'http://chenzhou.58.com/ershoufang/25611050935752x.shtml',
'http://yich.58.com/ershoufang/25621015405898x.shtml',
'http://qidong.58.com/ershoufang/25620528172752x.shtml',
'http://lvliang.58.com/ershoufang/25620488916535x.shtml',
'http://wjq.58.com/ershoufang/25620377697610x.shtml',
'http://nt.58.com/ershoufang/24117066321973x.shtml',
'http://changge.58.com/ershoufang/25621045221302x.shtml',
'http://shaoyang.58.com/ershoufang/25616906539575x.shtml',
'http://mz.58.com/ershoufang/25617079902788x.shtml',
'http://haining.58.com/ershoufang/25620803872572x.shtml',
'http://nc.58.com/ershoufang/25616033209027x.shtml',
'http://liuzhou.58.com/ershoufang/25613015590463x.shtml',
'http://linxia.58.com/ershoufang/25620613628973x.shtml',
'http://dxal.58.com/ershoufang/25620930878923x.shtml',
'http://guangyuan.58.com/ershoufang/25621069123510x.shtml',
'http://bs.58.com/ershoufang/25620929647950x.shtml',
'http://wuyishan.58.com/ershoufang/25620833260229x.shtml',
'http://lj.58.com/ershoufang/25614667807788x.shtml',
'http://mas.58.com/ershoufang/25620896537642x.shtml',
'http://yinchuan.58.com/ershoufang/25614226182964x.shtml',
'http://suizhou.58.com/ershoufang/25620580379202x.shtml',
'http://nt.58.com/ershoufang/25613975947826x.shtml',
'http://suihua.58.com/ershoufang/25613527526575x.shtml',
'http://yuyao.58.com/ershoufang/25620111367867x.shtml',
'http://bt.58.com/ershoufang/25612099504845x.shtml',
'http://jiaozuo.58.com/ershoufang/25620641399627x.shtml',
'http://scnj.58.com/ershoufang/25613134586549x.shtml',
'http://puyang.58.com/ershoufang/25620789641129x.shtml',
'http://yz.58.com/ershoufang/25599336275774x.shtml',
'http://fushun.58.com/ershoufang/25620864214076x.shtml',
'http://es.58.com/ershoufang/25620701494442x.shtml',
'http://pj.58.com/ershoufang/25620845058753x.shtml',
'http://tc.58.com/ershoufang/25621168249003x.shtml',
'http://jingmen.58.com/ershoufang/25614071543858x.shtml',
'http://yx.58.com/ershoufang/25620884678706x.shtml',
'http://jdz.58.com/ershoufang/25621018906814x.shtml',
'http://nanchong.58.com/ershoufang/25610030025915x.shtml',
'http://bijie.58.com/ershoufang/25620846679226x.shtml',
'http://dh.58.com/ershoufang/25620804597040x.shtml',
'http://tr.58.com/ershoufang/25620916914221x.shtml',
'http://luoyang.58.com/ershoufang/25613338151342x.shtml',
'http://jyg.58.com/ershoufang/25620058792015x.shtml',
'http://xiangxi.58.com/ershoufang/25621057740994x.shtml',
'http://suqian.58.com/ershoufang/25620965478059x.shtml',
'http://zhangbei.58.com/ershoufang/25621143931692x.shtml',
'http://jinchang.58.com/ershoufang/25620835287217x.shtml',
'http://gl.58.com/ershoufang/25612651473849x.shtml',
'http://yulin.58.com/ershoufang/25610035222858x.shtml',
'http://qh.58.com/ershoufang/25620775570111x.shtml',
'http://huzhou.58.com/ershoufang/23447544245258x.shtml',
'http://xiangshanxian.58.com/ershoufang/25621162925749x.shtml',
'http://zjj.58.com/ershoufang/25611320070470x.shtml',
'http://yanling.58.com/ershoufang/25621136718635x.shtml',
'http://yidou.58.com/ershoufang/25620523244083x.shtml',
'http://qianjiang.58.com/ershoufang/25621175220394x.shtml',
'http://hx.58.com/ershoufang/25620627682247x.shtml',
'http://lincang.58.com/ershoufang/25612517239983x.shtml',
'http://ganzi.58.com/ershoufang/25619154874302x.shtml',
'http://huizhou.58.com/ershoufang/22413886096417x.shtml',
'http://kl.58.com/ershoufang/25620969392429x.shtml',
'http://jianhu.58.com/ershoufang/25621056161587x.shtml',
'http://liyang.58.com/ershoufang/25621036887621x.shtml',
'http://hb.58.com/ershoufang/24462688677045x.shtml',
'http://xinyu.58.com/ershoufang/25620639790282x.shtml',
'http://xzpeixian.58.com/ershoufang/25620913429036x.shtml',
'http://yuncheng.58.com/ershoufang/23730160357818x.shtml',
'http://jinzhou.58.com/ershoufang/25610870925509x.shtml',
'http://xn.58.com/ershoufang/25610703366720x.shtml',
'http://sd.58.com/ershoufang/25617689636142x.shtml',
'http://qxn.58.com/ershoufang/25620984411186x.shtml',
'http://zd.58.com/ershoufang/25620928774988x.shtml',
'http://zq.58.com/ershoufang/25612462935223x.shtml',
'http://sanya.58.com/ershoufang/25613755364292x.shtml',
'http://jh.58.com/ershoufang/25620745548332x.shtml',
'http://ruiancity.58.com/ershoufang/25616563487044x.shtml',
'http://xinyishi.58.com/ershoufang/25620976213422x.shtml',
'http://tm.58.com/ershoufang/25620312891702x.shtml',
'http://huzhou.58.com/ershoufang/25620704588493x.shtml',
'http://ls.58.com/ershoufang/25601375574606x.shtml',
'http://as.58.com/ershoufang/25596516546236x.shtml',
'http://am.58.com/ershoufang/24437896686016x.shtml',
'http://xiangtan.58.com/ershoufang/25616740673595x.shtml',
'http://tlf.58.com/ershoufang/25617336487854x.shtml',
'http://ta.58.com/ershoufang/25609976293051x.shtml',
'http://wzs.58.com/ershoufang/25620987516606x.shtml',
'http://taizhou.58.com/ershoufang/25492275275071x.shtml',
'http://hanzhong.58.com/ershoufang/25613148206766x.shtml',
'http://hh.58.com/ershoufang/25612263750445x.shtml',
'http://hy.58.com/ershoufang/25569413270861x.shtml',
'http://cn.58.com/ershoufang/25620924901198x.shtml',
'http://bh.58.com/ershoufang/25616829493313x.shtml',
'http://linzhi.58.com/ershoufang/25616728281528x.shtml',
'http://guoluo.58.com/ershoufang/25619964110792x.shtml',
'http://linyixian.58.com/ershoufang/25620097827770x.shtml',
'http://zx.58.com/ershoufang/25619850808492x.shtml',
'http://honghe.58.com/ershoufang/25620754921927x.shtml',
'http://jx.58.com/ershoufang/25620973481649x.shtml',
'http://sn.58.com/ershoufang/25616773945262x.shtml',
'http://chongzuo.58.com/ershoufang/25621066218665x.shtml',
'http://kaifeng.58.com/ershoufang/25610956303419x.shtml',
'http://baoji.58.com/ershoufang/25615324942410x.shtml',
'http://rkz.58.com/ershoufang/25616797107401x.shtml',
'http://nq.58.com/ershoufang/25616815372240x.shtml',
'http://hld.58.com/ershoufang/25610381172027x.shtml',
'http://yxx.58.com/ershoufang/25621027945409x.shtml',
'http://qingxu.58.com/ershoufang/25616993505724x.shtml',
'http://wuzhou.58.com/ershoufang/24253209119157x.shtml',
'http://xt.58.com/ershoufang/25610375993273x.shtml',
'http://hlr.58.com/ershoufang/25620750469452x.shtml',
'http://alsm.58.com/ershoufang/25620604955563x.shtml',
'http://wenling.58.com/ershoufang/25613359533871x.shtml',
'http://zk.58.com/ershoufang/25620865606345x.shtml',
'http://danyang.58.com/ershoufang/24573614501696x.shtml',
'http://changji.58.com/ershoufang/25527805313729x.shtml',
'http://ale.58.com/ershoufang/25619769819948x.shtml',
'http://luzhou.58.com/ershoufang/25613290741298x.shtml',
'http://cx.58.com/ershoufang/25620922511686x.shtml')
    for l in ls:
        w58.getitem(UrlBean(l, 'wwwfangcom#getitem', param='北京',order='1234'))
#print(www58com.__name__)
#print(www58com.getcitys.__name__)
#print(isinstance([], list))

"""
print(www58com.__name__)
#print(sys.modules.keys())
print(sys.modules['__main__'])

import sys
import os

def get_module():

    def main_module_name():
        mod = sys.modules['__main__']
        file = getattr(mod, '__file__', None)
        return file and os.path.splitext(os.path.basename(file))[0]

    def modname(fvars):

        file, name = fvars.get('__file__'), fvars.get('__name__')
        if file is None or name is None:
            return None

        if name == '__main__':
            name = main_module_name()
        return name

    module_name = modname(globals())
    # print globals()
    # print module_name

get_module()
"""